!function(t,e,i){if("BackCompat"===document.compatMode)throw new Error("artDialog: Document types require more than xhtml1.0");var n,o=0,s=(t(document.getElementsByTagName("html")[0]),"artDialog"+ +new Date),l=e.VBArray&&!e.XMLHttpRequest,a="createTouch"in document&&!("onmousemove"in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),r=!l&&!a,c=function(t,e,l){t=t||{},("string"==typeof t||1===t.nodeType)&&(t={content:t,fixed:!a});var d,u=c.defaults,h=t.follow=1===this.nodeType&&this||t.follow;for(var f in u)t[f]===i&&(t[f]=u[f]);return t.id=h&&h[s+"follow"]||t.id||s+o,(d=c.list[t.id])?(h&&d.follow(h),d.zIndex().focus(),d):(r||(t.fixed=!1),t.button&&t.button.push||(t.button=[]),l!==i&&(t.cancel=l),t.cancel&&t.button.push({id:"cancel",value:t.cancelVal,callback:t.cancel}),e!==i&&(t.ok=e),t.ok&&t.button.push({id:"ok",value:t.okVal,callback:t.ok,focus:!0}),c.defaults.zIndex=t.zIndex,o++,c.list[t.id]=n?n.constructor(t):new c.fn.constructor(t))};c.version="5.0.2",c.fn=c.prototype={constructor:function(t){var e;return this.closed=!1,this.config=t,this.DOM=e=this.DOM||this._getDom(),t.skin&&e.wrap.addClass(t.skin),e.wrap.css("position",t.fixed?"fixed":"absolute"),e.close[t.cancel===!1?"hide":"show"](),e.content.css("padding",t.padding),this.button.apply(this,t.button),this.title(t.title).content(t.content).size(t.width,t.height).time(t.time),this._reset(),this.zIndex(),t.lock&&this.lock(),this._addEvent(),this[t.visible?"visible":"hidden"]().focus(),n=null,t.init&&t.init.call(this),this},content:function(e){var i,n,o,s,l=this,a=this.DOM.content,r=a[0];return this._elemBack&&(this._elemBack(),delete this._elemBack),"string"==typeof e?a.html(e):e&&1===e.nodeType&&(s=e.style.display,i=e.previousSibling,n=e.nextSibling,o=e.parentNode,this._elemBack=function(){i&&i.parentNode?i.parentNode.insertBefore(e,i.nextSibling):n&&n.parentNode?n.parentNode.insertBefore(e,n):o&&o.appendChild(e),e.style.display=s,l._elemBack=null},a.html(""),r.appendChild(e),t(e).show()),this._reset(),this},title:function(t){var e=this.DOM,n=e.outer,o=e.title,s="d-state-noTitle";return t===!1||t==i?(o.hide().html(""),n.addClass(s)):(o.show().html(t),n.removeClass(s)),this},_toNumber:function(t,e){if(!t&&0!==t||"number"==typeof t)return t;var i=t.length-1;return t.lastIndexOf("px")===i?t=parseInt(t):t.lastIndexOf("%")===i&&(t=parseInt(e*t.split("%")[0]/100)),t},position:function(t,e){var n=this.DOM,o=n.wrap[0],l=n.window,a=n.document,r=this.config.fixed,c=r?0:a.scrollLeft(),d=r?0:a.scrollTop(),u=l.width(),h=l.height(),f=o.offsetWidth,p=o.offsetHeight,m=o.style;return(t||0==t)&&(t=this._toNumber(t,u-f),"number"==typeof t?(t=r?t+=c:t+c,m.left=Math.max(t,c)+"px"):"string"==typeof t&&(m.left=t)),(e||0==e)&&(e=this._toNumber(e,h-p),"number"==typeof e?(e=r?e+=d:e+d,m.top=Math.max(e,d)+"px"):"string"==typeof e&&(m.top=e)),t==i&&e==i&&(t=(u-f)/2+c,e=382*(h-p)/1e3+d,m.left=Math.max(parseInt(t),c)+"px",m.top=Math.max(parseInt(e),d)+"px"),this._follow&&(this._follow.removeAttribute(s+"follow"),this._follow=null),this},size:function(t,e){var i=this.DOM.main[0].style;return"number"==typeof t&&(t+="px"),"number"==typeof e&&(e+="px"),i.width=t,i.height=e,this},follow:function(e){var i=t(e),n=this.config;if(!e||!e.offsetWidth&&!e.offsetHeight)return this.position(this._left,this._top);var o=n.fixed,l=s+"follow",a=this.DOM,r=a.window,c=a.document,d=r.width(),u=r.height(),h=c.scrollLeft(),f=c.scrollTop(),p=i.offset(),m=e.offsetWidth,v=e.offsetHeight,g=o?p.left-h:p.left,w=o?p.top-f:p.top,b=this.DOM.wrap[0],k=b.style,y=b.offsetWidth,x=b.offsetHeight,_=g-(y-m)/2,D=w+v,M=o?0:h,C=o?0:f;return _=M>_?g:_+y>d&&g-y>M?g-y+m:_,D=D+x>u+C&&w-x>C?w-x:D,k.left=parseInt(_)+"px",k.top=parseInt(D)+"px",this._follow&&this._follow.removeAttribute(l),this._follow=e,e[l]=n.id,this},button:function(){for(var e,i,n,o,l,a=this.DOM,r=a.buttons,c=r[0],d="btn-primary",u=this._listeners=this._listeners||{},h=[].slice.call(arguments),f=0;f<h.length;f++)e=h[f],i=e.value,n=e.id||i,o=!u[n],l=o?document.createElement("input"):u[n].elem,l.type="button",l.className="btn",u[n]||(u[n]={}),i&&(l.value=i),e.width&&(l.style.width=e.width),e.callback&&(u[n].callback=e.callback),e.focus&&(this._focus&&this._focus.removeClass(d),this._focus=t(l).addClass(d),this.focus()),l[s+"callback"]=n,l.disabled=!!e.disabled,o&&(u[n].elem=l,c.appendChild(l));return r[0].style.display=h.length?"":"none",this},visible:function(){return this.DOM.wrap.css("visibility","visible"),this.DOM.outer.addClass("d-state-visible"),this._isLock&&this._lockMask.show(),this},hidden:function(){return this.DOM.wrap.css("visibility","hidden"),this.DOM.outer.removeClass("d-state-visible"),this._isLock&&this._lockMask.hide(),this},close:function(){if(this.closed)return this;var t=this.DOM,e=t.wrap,i=c.list,o=this.config.close;if(o&&o.call(this)===!1)return this;if(c.focus===this&&(c.focus=null),this._follow&&this._follow.removeAttribute(s+"follow"),this._elemBack&&this._elemBack(),this.time(),this.unlock(),this._removeEvent(),delete i[this.config.id],n)e.remove();else{n=this,t.title.html(""),t.content.html(""),t.buttons.html(""),e[0].className=e[0].style.cssText="",t.outer[0].className="d-outer",e.css({left:0,top:0,position:r?"fixed":"absolute"});for(var l in this)this.hasOwnProperty(l)&&"DOM"!==l&&delete this[l];this.hidden()}return this.closed=!0,this},time:function(t){var e=this,i=this._timer;return i&&clearTimeout(i),t&&(this._timer=setTimeout(function(){e._click("cancel")},1e3*t)),this},focus:function(){if(this.config.focus)try{var t=this._focus&&this._focus[0]||this.DOM.close[0];t&&t.focus()}catch(e){}return this},zIndex:function(){var t=this.DOM,e=c.focus,i=c.defaults.zIndex++;return t.wrap.css("zIndex",i),this._lockMask&&this._lockMask.css("zIndex",i-1),e&&e.DOM.outer.removeClass("d-state-focus"),c.focus=this,t.outer.addClass("d-state-focus"),this},lock:function(){if(this._isLock)return this;var i=this,n=(this.config,this.DOM),o=document.createElement("div"),s=t(o),l=c.defaults.zIndex-1;return this.zIndex(),n.outer.addClass("d-state-lock"),s.css({zIndex:l,position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",background:"rgba(0,0,0,.1)",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#19000000,endColorstr=#19000000)"}).addClass("d-mask"),r||s.css({position:"absolute",width:t(e).width()+"px",height:t(document).height()+"px"}),s.bind("dblclick",function(){i._click("cancel")}),document.body.appendChild(o),this._lockMask=s,this._isLock=!0,this},unlock:function(){return this._isLock?(this._lockMask.unbind(),this._lockMask.hide(),this._lockMask.remove(),this.DOM.outer.removeClass("d-state-lock"),this._isLock=!1,this):this},_getDom:function(){var i=document.body;if(!i)throw new Error('artDialog: "documents.body" not ready');var n=document.createElement("div");n.style.cssText="position:absolute;left:0;top:0",n.innerHTML=c._templates,i.insertBefore(n,i.firstChild);for(var o,s=0,l={},a=n.getElementsByTagName("*"),r=a.length;r>s;s++)o=a[s].className.split("d-")[1],o&&(l[o]=t(a[s]));return l.window=t(e),l.document=t(document),l.wrap=t(n),l},_click:function(t){var e=this._listeners[t]&&this._listeners[t].callback;return"function"!=typeof e||e.call(this)!==!1?this.close():this},_reset:function(){var t=this.config.follow||this._follow;t?this.follow(t):this.position()},_addEvent:function(){var t=this,e=this.DOM;e.wrap.bind("click",function(i){var n,o=i.target;return o.disabled?!1:o===e.close[0]?(t._click("cancel"),!1):(n=o[s+"callback"],void(n&&t._click(n)))}).bind("mousedown",function(){t.zIndex()})},_removeEvent:function(){this.DOM.wrap.unbind()}},c.fn.constructor.prototype=c.fn,t.fn.dialog=t.fn.artDialog=function(){var t=arguments;return this[this.live?"live":"bind"]("click",function(){return c.apply(this,t),!1}),this},c.focus=null,c.get=function(t){return t===i?c.list:c.list[t]},c.list={},t(document).bind("keydown",function(t){var e=t.target,i=e.nodeName,n=/^input|textarea$/i,o=c.focus,s=t.keyCode;!o||!o.config.esc||n.test(i)&&"button"!==e.type||27===s&&o._click("cancel")}),t(e).bind("resize",function(){var t=c.list;for(var e in t)t[e]._reset()}),c._templates='<div class="d-outer"><table class="d-border"><tbody><tr><td class="d-nw"></td><td class="d-n"></td><td class="d-ne"></td></tr><tr><td class="d-w"></td><td class="d-c"><div class="d-inner"><table class="d-dialog"><tbody><tr><td class="d-header"><div class="d-titleBar"><div class="d-title"></div><a class="d-close" href="javascript:/*artDialog*/;">×</a></div></td></tr><tr><td class="d-main"><div class="d-content"></div></td></tr><tr><td class="d-footer"><div class="d-buttons"></div></td></tr></tbody></table></div></td><td class="d-e"></td></tr><tr><td class="d-sw"></td><td class="d-s"></td><td class="d-se"></td></tr></tbody></table></div>',c.defaults={content:'<div class="d-loading"><span>loading..</span></div>',button:null,ok:null,cancel:null,init:null,close:null,okVal:"确定",cancelVal:"取消",width:"auto",height:"auto",padding:"20px 25px",skin:null,time:null,esc:!0,focus:!0,visible:!0,follow:null,lock:!1,fixed:!1,zIndex:5e3},this.artDialog=t.dialog=t.artDialog=c}(this.art||this.jQuery,this),function(t){var e=window.VBArray&&!window.XMLHttpRequest,i=artDialog.top=function(){var t=window,e=function(t){try{var e=window[t].document;e.getElementsByTagName}catch(i){return!1}return window[t].artDialog&&0===e.getElementsByTagName("frameset").length};return e("top")?t=window.top:e("parent")&&(t=window.parent),t}();artDialog.parent=i,t.open=t.dialog.open=function(i,n,o){n=n||{};var s,l,a,r,c,d,u,h,f,p=artDialog.top,m="position:absolute;left:-9999em;top:-9999em;border:none 0;background:transparent",v="width:100%;height:100%;border:none 0";if(o===!1){var g=+new Date,w=i.replace(/([?&])_=[^&]*/,"$1_="+g);i=w+(w===i?(/\?/.test(i)?"&":"?")+"_="+g:"")}var b=function(){var i,o,r=l.content.find(".d-loading"),d=s.config;a.addClass("d-state-full"),r&&r.hide();try{h=c.contentWindow,u=t(h.document),f=h.document.body}catch(m){return c.style.cssText=v,d.follow?s.follow(d.follow):s.position(d.left,d.top),n.init&&n.init.call(s,h,p),void(n.init=null)}i="auto"===d.width?u.width()+(e?0:parseInt(t(f).css("marginLeft"))):d.width,o="auto"===d.height?u.height():d.height,setTimeout(function(){c.style.cssText=v},0),s.size(i,o),d.follow?s.follow(d.follow):s.position(d.left,d.top),n.init&&n.init.call(s,h,p),n.init=null},k={init:function(){s=this,l=s.DOM,r=l.main,a=l.content,c=s.iframe=p.document.createElement("iframe"),c.src=i,c.name="Open"+s.config.id,c.id="Open"+s.config.id,c.style.cssText=m,c.setAttribute("frameborder",0,0),c.setAttribute("allowTransparency",!0),d=t(c),s.DOM.content.append(c),h=c.contentWindow;try{h.name=c.name,artDialog.data(c.name+_open,s),artDialog.data(c.name+_opener,window)}catch(e){}d.bind("load",b)},close:function(){if(d.css("display","none").unbind("load",b),n.close&&n.close.call(this,c.contentWindow,p)===!1)return!1;a.removeClass("aui_state_full"),d[0].src="about:blank",d.remove();try{artDialog.removeData(c.name+_open),artDialog.removeData(c.name+_opener)}catch(t){}}};"function"==typeof n.ok&&(k.ok=function(){return n.ok.call(s,c.contentWindow,p)}),"function"==typeof n.cancel&&(k.cancel=function(){return n.cancel.call(s,c.contentWindow,p)}),delete n.content;for(var y in n)void 0===k[y]&&(k[y]=n[y]);return t.dialog(k)},t.load=t.dialog.load=function(e,i,n){n=n||!1;var o=i||{},s={init:function(i){{var s=this;s.config}t.ajax({url:e,success:function(t){if( t && t.isSucess == 0){ s._listeners.ok = null; s.DOM.content.html(t.msg); return; }s.content(t),o.init&&o.init.call(s,i)},cache:n})}};delete i.content;for(var l in o)void 0===s[l]&&(s[l]=o[l]);return t.dialog(s)},t.alert=t.dialog.alert=function(e,i){return t.dialog({id:"Alert",init:function(){var t=this;t.DOM.dialog.addClass("d-dialog-alert")},width:300,height:80,padding:"10px 10px 10px 80px",fixed:!0,lock:!0,content:e,ok:!0,close:function(){var t=this;i&&i(),t.DOM.dialog.removeClass("d-dialog-alert")}})},t.confirm=t.dialog.confirm=function(e,i,n){return t.dialog({id:"Confirm",fixed:!0,lock:!0,content:e,width:300,height:80,padding:"10px 10px 10px 80px",init:function(){var t=this;t.DOM.dialog.addClass("d-dialog-confirm")},ok:function(t){return i.call(this,t)},cancel:function(t){return n&&n.call(this,t)},close:function(){var t=this;t.DOM.dialog.removeClass("d-dialog-confirm")}})},t.prompt=t.dialog.prompt=function(e,i,n){n=n||"";var o;return t.dialog({id:"Prompt",fixed:!0,lock:!0,content:['<div style="margin-bottom:5px;font-size:12px">',e,"</div>","<div>",'<input type="text" class="d-input-text" value="',n,'" style="width:18em;" />',"</div>"].join(""),init:function(){o=this.DOM.content.find(".d-input-text")[0],o.select(),o.focus(),this.DOM.dialog.addClass("d-dialog-prompt")},ok:function(){return i&&i.call(this,o.value)},cancel:function(){var t=this;t.DOM.dialog.removeClass("d-dialog-prompt")}})},t.tips=t.dialog.tips=function(e,i){return t.dialog({id:"Tips",title:!1,cancel:!1,fixed:!0,lock:!1}).content('<div style="padding: 0 1em;">'+e+"</div>").time(i||1.5)},t.dialog.prototype.shake=function(){var t=function(t,e,i){var n=+new Date,o=setInterval(function(){var s=+new Date-n,l=s/i;l>=1?(clearInterval(o),e(l)):t(l)},13)},e=function(i,n,o){var s=arguments[3];void 0===s&&(s=6,o/=s);var l=i.style,a=parseInt(l.marginLeft)||0;t(function(t){i.style.marginLeft=a+(n-a)*t+"px"},function(){0!==s&&e(i,1===s?0:1.3*(n/s-n),o,--s)},o)};return function(){return e(this.DOM.wrap[0],40,600),this}}(this.jQuery);var n=function(){var t=this,e=function(e){var i=t[e];t[e]=function(){return i.apply(t,arguments)}};e("start"),e("over"),e("end")};n.prototype={start:function(e){return t(document).bind("mousemove",this.over).bind("mouseup",this.end),this._sClientX=e.clientX,this._sClientY=e.clientY,this.onstart(e.clientX,e.clientY),!1},over:function(t){return this._mClientX=t.clientX,this._mClientY=t.clientY,this.onover(t.clientX-this._sClientX,t.clientY-this._sClientY),!1},end:function(e){return t(document).unbind("mousemove",this.over).unbind("mouseup",this.end),this.onend(e.clientX,e.clientY),!1}};var o=t(window),s=t(document),l=document.documentElement,a=!("minWidth"in l.style),r=!a&&"onlosecapture"in l,c="setCapture"in l,d=function(){return!1},u=function(t){var e,i,l,a,u=new n,h=artDialog.focus,f=h.DOM,p=f.wrap,m=f.title,v=f.main,g=p[0],w=m[0],b=v[0],k=g.style,y=b.style,x=t.target===f.se[0]?!0:!1,_="fixed"===g.style.position,D=_?0:s.scrollLeft(),M=_?0:s.scrollTop(),C=o.width()-g.offsetWidth+D,O=o.height()-g.offsetHeight+M;u.onstart=function(t,n){x?(e=b.offsetWidth,i=b.offsetHeight):(l=g.offsetLeft,a=g.offsetTop),s.bind("dblclick",u.end).bind("dragstart",d),r?m.bind("losecapture",u.end):o.bind("blur",u.end),c&&w.setCapture(),p.addClass("d-state-drag"),h.focus()},u.onover=function(t,n){if(x){var o=t+e,s=n+i;k.width="auto",y.width=Math.max(0,o)+"px",k.width=g.offsetWidth+"px",y.height=Math.max(0,s)+"px"}else{var r=Math.max(D,Math.min(C,t+l)),c=Math.max(M,Math.min(O,n+a));k.left=r+"px",k.top=c+"px"}},u.onend=function(t,e){s.unbind("dblclick",u.end).unbind("dragstart",d),r?m.unbind("losecapture",u.end):o.unbind("blur",u.end),c&&w.releaseCapture(),p.removeClass("d-state-drag")},u.start(t)};t(document).bind("mousedown",function(t){var e=artDialog.focus;if(e){var i=t.target,n=e.config,o=e.DOM;return n.drag!==!1&&i===o.title[0]||n.resize!==!1&&i===o.se[0]?(u(t),!1):void 0}})}(this.art||this.jQuery);
